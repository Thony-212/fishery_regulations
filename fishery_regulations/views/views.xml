<odoo>
    <!--Vista list-->
    <record id="views_fishery_regulation_list_v2" model="ir.ui.view">
        <field name="name">views_fishery_regulation_list</field>
        <field name="model">fishery.regulation</field>
        <field name="arch" type="xml">
            <list default_order = "publication_date desc">
                <field name= "official_gazette" />
                <field name= "is_extraordinary" />
                <field name= "official_regulations" />
                <field name= "regulation_type" widget="badge" />
                <field name= "type_status" widget="badge" />
                <field name= "publication_date" />
                <field name= "legal_instrument" />
                <field name="derogates_id" optional="hide"/>
            </list>
        </field>
    </record>

    <!--Vista form-->
    <record id="views_fishery_regulation_form" model="ir.ui.view">
        <field name="name">views_fishery_regulation_form</field>
        <field name="model">fishery.regulation</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <field name= "type_status" widget="statusbar" options="{'clickable': True}"/>
                </header>
                <sheet>
                    <group>
                        <field name= "official_gazette"/>
                        <field name= "is_extraordinary"/>
                        <field name= "official_regulations"/>
                        <field name= "regulation_type"/>
                        <field name="derogates_id"/>
                        <field name="derogated_by_id" invisible="type_status != 'derogado'" readonly= "1"/>
                        <field name= "publication_date"/>
                        <field name= "attachment_ids" widget="many2many_binary"/> 
                    </group>
                    <group>
                        <field name= "legal_instrument"/>
                    </group>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <!--Buscador-->
    <record id="views_fishery_regulation_search" model="ir.ui.view">
        <field name="name">fishery.regulation.search</field>
        <field name="model">fishery.regulation</field>
        <field name="arch" type="xml">
            <search>
                <field name="official_gazette"/>
                <field name="legal_instrument"/>

                <filter string="Leyes" name="leyes" domain="[('regulation_type', '=', 'ley')]"/>
                <filter string="Decretos" name="decretos" domain="[('regulation_type', '=', 'decreto')]"/>
                <filter string="Resoluciones" name="resoluciones" domain="[('regulation_type', '=', 'resolucion')]"/>
                <filter string="Providencias" name="providencias" domain="[('regulation_type', '=', 'providencia')]"/>
                <separator/>
                <filter string="Vigente" name="vigente" domain="[('type_status', '=', 'vigente')]"/>
                <filter string="Derogado" name="derogado" domain="[('type_status', '=', 'derogado')]"/>
                
                <group expand="0" string="Agrupar por...">
                    <filter string="Tipo de Normativa" name="group_by_type" context="{'group_by': 'regulation_type'}"/>
                    <filter string="Estado" name="group_by_status" context="{'group_by': 'type_status'}"/>
                    <filter string="Año" name="group_by_year" context="{'group_by': 'publication_date'}"/>
                </group>
            </search>
        </field>
    </record>

    <!--Acción de ventana-->
    <record id = "action_fishery_regulation" model = "ir.actions.act_window">
        <field name="name">Normativa Pesquera</field>
        <field name="res_model">fishery.regulation</field>
        <field name="view_mode">list,form</field>
    </record>

    <!--Menú-->

    <menuitem id="menu_fishery_regulation_root"
          name="Normativas Pesqueras"
          parent=""/>
    <menuitem id="menu_fishery_regulation" 
          name="Gestión de Normativas"
          parent="menu_fishery_regulation_root"
          action="action_fishery_regulation"/>
</odoo>